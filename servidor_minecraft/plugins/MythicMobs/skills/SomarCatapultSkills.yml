CPrepareModelSomar:
  Skills:
    - model{mid=CatapultaSomar;n="Somar Catapult"}
Disparar:
  Skills:
    - cancelevent
    - state{mid=CatapultaSomar;s=animationLanzarBloque3} @Self
    - message{m="disparando"} @NearestPlayer
    - delay 55
    - projectile{bullet=block;material=STONE;vO=1;g=0.1;v=25;syo=5;sfo=2;mr=500;int=0.01} @Forward{a=40}
ContornoVariabs:
  Skills:
    - setvariable{key=posc;s=target;t=String;value="derecha"} @LivingInCone{a=120;r=5;rot=280}
    - setvariable{key=posc;s=target;t=String;value="izquierda"} @LivingInCone{a=120;r=5;rot=100}
    - message{m="marcando - <target.var.posc>"} @LivingInCone{a=360;r=5;rot=100}
Girar:
  TriggerConditions:
    - variableEquals{key=caster.posc;value="derecha"} CastInstead GirarDerecha
    - variableEquals{key=caster.posc;value="izquierda"} CastInstead GirarIzquierda
#    - variableEquals{key=target.posc;value="null"} true
  Skills:
    - message{m="interactuando"} @NearestPlayer
GirarDerecha:
  Skills:
    - message{m="interactuandoD"} @NearestPlayer
    - setrotation{relative=true;pitch=0;yaw=25} @Self
GirarIzquierda:
  Skills:
    - message{m="interactuandoI"} @NearestPlayer
    - setrotation{relative=true;pitch=0;yaw=-25} @Self